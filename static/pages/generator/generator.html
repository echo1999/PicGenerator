<!doctype html>

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <title>å›¾ç‰‡ç”Ÿæˆ</title>
  <meta name="keywords" content="css3, html5, js, background video, fullscreen video">
  <!-- CSS -->
  <link rel="stylesheet" href="generator.css" type="text/css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:400,100,300,500">
  <link rel="stylesheet" href="./form-1/assets/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="./form-1/assets/css/form-elements.css">
  <link rel="stylesheet" href="./form-1/assets/css/style.css">

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  	<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
  	<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->

  <!-- Favicon and touch icons -->
  <link rel="shortcut icon" href="./form-1/assets/ico/favicon.png">
  <link rel="apple-touch-icon-precomposed" sizes="144x144"
    href="./form-1/assets/ico/apple-touch-icon-144-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="114x114"
    href="./form-1/assets/ico/apple-touch-icon-114-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="./form-1/assets/ico/apple-touch-icon-72-precomposed.png">
  <link rel="apple-touch-icon-precomposed" href="./form-1/assets/ico/apple-touch-icon-57-precomposed.png">
  <script>
    try {
      Typekit.load({
        async: true
      });
    } catch (e) { }
  </script>
  <style>
    #search {
      cursor: pointer;
    }
  </style>
</head>

<body>
  <div id="container">
    <video id="background_video" loop muted></video>
    <div id="video_cover"></div>
    <div id="overlay"></div>

    <div id="main">
      <div id="left">
        <div class="tips" style="vertical-align: middle">é€‰æ‹©ç´ æ</div>

        <div id="showPic">
          <!-- <img id="showFigure" src="../../image/figure/figure1.jpg">
          <img id="resultPic" src="../../image/background/background1.jpg"> -->
        </div>
        <div id="btns">
          <div class="left_btn" id="btn_start">èåˆ</div>
          <div class="left_btn" id="btn_add">æ·»åŠ </div>
          <div class="left_btn" id="btn_restart">æ¸…ç©º</div>
        </div>

        <div id="selectFilter">
          <img class="filterPic" src="../../image/filter/è¾¹ç¼˜æå–.jpg" data-key="1">
          <img class="filterPic" src="../../image/filter/è¾¹ç¼˜å¢å¼º.jpg" data-key="2">
          <img class="filterPic" src="../../image/filter/æµ®é›•.jpg" data-key="3">
          <img class="filterPic" src="../../image/filter/è½®å»“.jpg" data-key="4">
          <img class="filterPic" src="../../image/filter/æ¨¡ç³Š.jpg" data-key="5">
          <img class="filterPic" src="../../image/filter/å¹³æ»‘.jpg" data-key="6">
          <img class="filterPic" src="../../image/filter/å¹³æ»‘æ»¤é•œ_åŠ å¼ºç‰ˆ.jpg" data-key="7">
          <img class="filterPic" src="../../image/filter/é”åŒ–.jpg" data-key="8">
          <img class="filterPic" src="../../image/filter/ç¼‡åº£æ«§.jpg" data-key="9">
          <img class="filterPic" src="../../image/filter/ç»†èŠ‚.jpg" data-key="10">
          <img class="filterPic" src="../../image/filter/ç»„åˆ.jpg" data-key="11">
        </div>
      </div>
      <div id="right">
        <div class="tab tab-card">
          <!-- æ ‡ç­¾ -->
          <ul class="tab-title">
            <li class="active tabA">å›¾åƒç´ æ</li>
            <li class="tabB">äººåƒå›¾</li>
            <li class="tabC">è´è¶å›¾</li>
          </ul>
        </div>
        <div id="myContent">
          <div class="contentB">
            <div id="selectFigList">
              <div class="selectFig" style="background-color: rgba(241, 241, 241, 0.9);">
                <img class="selectAdd launch-modal" src="../../../image/add.png" href="#"
                  data-modal-id="modal-register">
              </div>
              <!-- <img class="selectFig" src="../../image/figure/figure1.jpg">
              <img class="selectFig" src="../../image/figure/figure2.jpg">
              <img class="selectFig" src="../../image/figure/figure3.jpg">
              <img class="selectFig" src="../../image/figure/figure4.jpg">
              <img class="selectFig" src="../../image/figure/figure5.jpg">
              <img class="selectFig" src="../../image/figure/figure6.jpg">
              <img class="selectFig" src="../../image/figure/figure7.jpg">
              <img class="selectFig" src="../../image/figure/figure8.jpg"> -->
            </div>
          </div>
          <div class="contentA">
            <div id="selectBgList">
              <!-- <img class="selectBG" src="../../image/background/background1.jpg">
              <img class="selectBG" src="../../image/background/background2.jpg">
              <img class="selectBG" src="../../image/background/background2.jpg">
              <img class="selectBG" src="../../image/background/background1.jpg">
              <img class="selectBG" src="../../image/background/background1.jpg">
              <img class="selectBG" src="../../image/background/background2.jpg">
              <img class="selectBG" src="../../image/background/background2.jpg">
              <img class="selectBG" src="../../image/background/background1.jpg"> -->
            </div>
          </div>
          <div class="contentC">
            <div id="selectBfList">
              <!-- <img class="selectBf" src="../../image/white_butterfly/butterfly1.jpg">
              <img class="selectBf" src="../../image/white_butterfly/butterfly2.jpg">
              <img class="selectBf" src="../../image/white_butterfly/butterfly3.jpg">
              <img class="selectBf" src="../../image/white_butterfly/butterfly4.jpg">
              <img class="selectBf" src="../../image/white_butterfly/butterfly5.jpg">
              <img class="selectBf" src="../../image/white_butterfly/butterfly6.jpg">
              <img class="selectBf" src="../../image/white_butterfly/butterfly7.jpg">
              <img class="selectBf" src="../../image/white_butterfly/butterfly8.jpg">
              <img class="selectBf" src="../../image/white_butterfly/butterfly9.jpg">
              <img class="selectBf" src="../../image/white_butterfly/butterfly10.jpg">
              <img class="selectBf" src="../../image/white_butterfly/butterfly11.jpg">
              <img class="selectBf" src="../../image/white_butterfly/butterfly12.jpg">
              <img class="selectBf" src="../../image/white_butterfly/butterfly13.jpg">
              <img class="selectBf" src="../../image/white_butterfly/butterfly14.jpg"> -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  </div>
  <!-- MODAL -->
  <div class="modal fade" id="modal-register" tabindex="-1" role="dialog" aria-labelledby="modal-register-label"
    aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">

        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">
            <span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
          </button>
          <h3 class="modal-title" id="modal-register-label">ä¸Šä¼ äººåƒå›¾ç‰‡</h3>
          <p>ç‚¹å‡»æµè§ˆé€‰æ‹©æœ¬åœ°äººåƒå›¾ç‰‡ä¸Šä¼ ï¼Œç‚¹å‡»ç¡®è®¤åå³ä¸Šä¼ æˆåŠŸ</p>
        </div>

        <div class="modal-body">
          <!-- <form role="form" action="" method="post" class="registration-form"> -->
            <!-- <div class="showimg">
              <img id="img" src="images/tx_1.jpg" alt="">
            </div>
            <button id="choosePic" type="submit" class="btn">ä¸Šä¼ å›¾åƒ...</button> -->
            <div class="showimg">
              <img id="preview" />
            </div>
            <center>
              <input type="file" name="file" onchange="imgPreview(this)" style="margin: 10px;" />
            </center>
            <button id="choosePic" class="btn">ç¡®è®¤</button>
          <!-- </form> -->
        </div>

      </div>
    </div>
  </div>
  <script src="../bideo.js"></script>
  <script src="../main.js"></script>

  <script>
    if (window.location.host.indexOf('github.io') !== -1 && window.location.protocol !== "https:") {
      window.location.protocol = "https";
    }
  </script>
  <script src="./generator.js"></script>
  <script src="../../packages/bigsea.js"></script>
  <script src="../../packages/jquery.min.js"></script>
  <!-- æ˜¾ç¤ºã€ä¸Šä¼ èƒŒæ™¯å›¾ -->
  <script type="text/javascript">
    Sea.Ajax({
      url: '/show.bg',
      data: {
      }
    }).then(res => {
      if (res) {
        console.log('ğŸ¸bgres', res)
        num = Number(res)
        console.log('ğŸ¸bgnum', num)
        let html = ''
        for (let i = 0; i < num; i++) {
          html += `<img class="selectBG" src="../../image/background/background${i + 1}.jpg" data-key=${i + 1}>`
        }
        document.querySelector('#selectBgList').innerHTML = html
      }
    })
    Sea('#selectBgList').on('click', '.selectBG', function (event) {
      // Sea('.selectBGList').on('click', function () {
      let BgNum = event.target.dataset.key
      // console.log('key', num)
      let html = `<img id="resultPic" src="../../image/background/background${BgNum}.jpg">`
      // document.querySelector('#showPic').innerHTML = html
      Sea('#showPic').append(html)
      Sea.Ajax({
        url: '/upload.bg',
        data: {
          selectNum: BgNum
        }
      }).then(res => {
        if (res == "ok") {
          console.log('backgroundä¸Šä¼ æˆåŠŸ')
        }
        if (res == "exist") {
          alert("å·²é€‰æ‹©èƒŒæ™¯ç´ æï¼Œè¯·å…ˆæ¸…ç©º")
        }
      })
      // Sea('.contentA').append(html)
    })

    //æ˜¾ç¤ºã€ä¸Šä¼ äººåƒç´ æ
    Sea.Ajax({
      url: '/show.fig',
      data: {
      }
    }).then(res => {
      if (res) {
        // console.log('ğŸ¸res', res)
        num = Number(res)
        // console.log('ğŸ¸num', num)
        let html = ''
        for (let i = 0; i < res; i++) {
          html += `<img class="selectFig" src="../../image/figure/figure${i + 1}.jpg" data-key=${i + 1}>`
        }
        Sea('#selectFigList').append(html)
        // document.querySelector('#selectFigList').innerHTML = html
      }
    })
    Sea('#selectFigList').on('click', '.selectFig', function (event) {
      // Sea('.selectBGList').on('click', function () {
      let FigNum = event.target.dataset.key
      // console.log('key', FigNum)
      if (FigNum != undefined) {
        let html = `<img id="showFigure" src="../../image/figure/figure${FigNum}.jpg">`
        // document.querySelector('#showPic').innerHTML = html
        Sea('#showPic').prepend(html)
        Sea.Ajax({
          url: '/upload.fig',
          data: {
            selectNum: FigNum
          }
        }).then(res => {
          if (res == "ok") {
            console.log('figureä¸Šä¼ æˆåŠŸ')
          }
          if (res == "exist") {
            alert("å·²é€‰æ‹©äººåƒç´ æï¼Œè¯·å…ˆæ¸…ç©º")
          }
        })
      }
    })

    //æ˜¾ç¤ºã€ä¸Šä¼ è´è¶å›¾
    Sea.Ajax({
      url: '/show.bf',
      data: {
      }
    }).then(res => {
      if (res) {
        console.log('ğŸ¸res', res)
        num = Number(res)
        console.log('ğŸ¸num', num)
        let html = ''
        for (let i = 0; i < res; i++) {
          html += `<img class="selectBf" src="../../image/white_butterfly/butterfly${i + 1}.jpg" data-key=${i + 1}>`
        }
        Sea('#selectBfList').append(html)
        // document.querySelector('#selectFigList').innerHTML = html
      }
    })
    Sea('#selectBfList').on('click', '.selectBf', function (event) {
      // Sea('.selectBGList').on('click', function () {

      let BfNum = event.target.dataset.key
      console.log('BfNum', BfNum)
      Sea.Ajax({
        url: '/upload.bf',
        data: {
          selectNum: BfNum
        }
      }).then(res => {
        if (res == "ok") {
                if (BfNum == 14) {
            let html = `
          <div id="introduce">
            <div class="bfIntroduce">
            è“é—ªè¶<br>(Morpho menelaus)
            è´è¶ç§‘é—ªè¶ä¸­æœ€å¤§çš„ä¸€ä¸ªç‰©ç§ï¼Œæ˜¯ä¸€ç§çƒ­å¸¦è´è¶ã€‚è“è‰²ç¿…è†€ååˆ†ç»šä¸½ï¼Œé•¿çº¦15cmã€‚æˆå¹´é›Œç¢Ÿçš„ç¿…è†€ä¸Šè¡¨é¢å‘ˆè“è‰²ï¼Œä¸‹è¡¨é¢ä¸æ ‘å¶ååˆ†ç›¸ä¼¼ï¼Œå‘ˆç°æ–‘é©³çš„æ£•è‰²ã€ç°è‰²ã€é»‘è‰²ã€‚
            </div>
            <video id="resultVideo" controls>
              <source src="../../packages/butterfly14.mp4" type="video/mp4">
            </video>
          </div>`
            document.querySelector('#showPic').innerHTML = html
          }
          else {
            let html = `<img id="showBf" src="../../image/white_butterfly/butterfly${BfNum}.jpg">`
            // document.querySelector('#showPic').innerHTML = html
            Sea('#showPic').prepend(html)
          }
        }
        if (res == "exist") {
          alert("å·²é€‰æ‹©è´è¶ç´ æï¼Œè¯·å…ˆæ¸…ç©º")
        }
      })


    })
    Sea('#selectFilter').on('click', '.filterPic', function (event) {
      // Sea('.selectBGList').on('click', function () {
      let FilterNum = event.target.dataset.key
      console.log('FilterNum', FilterNum)
      Sea('#selectFilter .filterPic').removeClass('active')
      Sea(event.target).addClass('active')
      Sea.Ajax({
        url: '/filter',
        data: {
          selectNum: FilterNum
        }
      }).then(res => {
        if (res == "none") {
          alert("è¯·å…ˆèåˆå›¾ç‰‡")
        }
        if (res == "ok") {
          // console.log('ğŸ¸è¯¥æ˜¾ç¤ºæ–°å›¾äº†')
          let html = `<img id="resultPic" src="../../image/resultPic/filterPic.jpg" >`
          document.querySelector('#showPic').innerHTML = html
        }
      })
    })
    Sea('#btn_start').on('click', function () {
      console.log('ğŸ¸æŒ‰ä¸‹äº†start')
      Sea.Ajax({
        url: '/show.result',
        data: {
        }
      }).then(res => {
        if (res == "hasBf") {
          console.log('å›¾ç‰‡èåˆæˆåŠŸ')
          let html = ''
          html += `<img id="resultPic" src="../../image/resultPic/mixPic2.jpg" >`
          document.querySelector('#showPic').innerHTML = html
        } else {
          let html = ''
          html += `<img id="resultPic" src="../../image/resultPic/mixPic1.jpg" >`
          document.querySelector('#showPic').innerHTML = html
        }
      })
    })
  </script>
  <script type="text/javascript">
    Sea('#btn_restart').on('click', function () {
      console.log('ğŸ¸æŒ‰ä¸‹äº†restart')
      document.getElementById('showPic').innerHTML = "";
      Sea.Ajax({
        url: '/show.reStart',
        data: {
        }
      }).then(res => {
        if (res == "ok") {
          console.log('æ–‡ä»¶å¤¹æ¸…ç©ºæˆåŠŸ')
        }
      })
    })
  </script>
  <script type="text/javascript">
    Sea('#btn_add').on('click', function () {
      console.log('ğŸ¸æŒ‰ä¸‹äº†add')

      Sea.Ajax({
        url: '/upload.temp',
        data: {
        }
      }).then(res => {
        if (res == "0") {
          alert("è¯·å…ˆé€‰æ‹©è´è¶")
        }
        if (res == "3") {
          let html = `
          <img id="showFigure" src="../../image/temp/figure.jpg">
          <img id="showBf" src="../../image/white_butterfly/butterfly14.jpg">
          <img id="resultPic" src="../../image/temp/background.jpg">
          `
          document.querySelector('#showPic').innerHTML = html
        }
        else {
          if (res == "bf") {
            let html = `
          <img id="showBf" src="../../image/white_butterfly/butterfly14.jpg">
          `
            document.querySelector('#showPic').innerHTML = html
          }
          if (res == "bg") {
            let html = `
          <img id="showBf" src="../../image/white_butterfly/butterfly14.jpg">
          <img id="resultPic" src="../../image/temp/background.jpg">
          `
            document.querySelector('#showPic').innerHTML = html
          }
          if (res == "figure") {
            let html = `
          <img id="showFigure" src="../../image/temp/figure.jpg">
          <img id="showBf" src="../../image/white_butterfly/butterfly14.jpg">
          `
            document.querySelector('#showPic').innerHTML = html
          }
        }
      })
    })
  </script>

  <script type="text/javascript">
    Sea('#choosePic').on('click', function () {
      console.log('ğŸ¸æŒ‰ä¸‹äº†choosePic')
      Sea('button.close').click()
      Sea.Ajax({
        url: '/upload.fig',
        data: {
          selectNum:"0"
        }
      }).then(res => {
        if (res == "ok") {
          let html = `<img id="showFigure" src="../../image/temp/figure.jpg">`
          Sea('#showPic').prepend(html)
        }
      })
    })
  </script>

  <script type="text/javascript">
    Sea('.contentA,.contentB,.contentC').hide()
    Sea('.contentA').show()
    Sea('.tab-title').on('click', 'li', function (event) {
      Sea('.tab-title li').removeClass('active')
      Sea(event.target).addClass('active')
      Sea('.contentA,.contentB,.contentC').hide()
      if (Sea(event.target).hasClass('tabA')) {
        // console.log('ğŸ¸contentAåº”è¯¥æ˜¾ç¤ºäº†')
        Sea('.contentA').show()
      }
      if (Sea(event.target).hasClass('tabB')) {
        // console.log('ğŸ¸contentBåº”è¯¥æ˜¾ç¤ºäº†')
        Sea('.contentB').show()
      }
      if (Sea(event.target).hasClass('tabC')) {
        // console.log('ğŸ¸contentCåº”è¯¥æ˜¾ç¤ºäº†')
        Sea('.contentC').show()
      }
    })
  </script>
  <!-- Javascript -->
  <script src="./form-1/assets/js/jquery-1.11.1.min.js"></script>
  <script src="./form-1/assets/bootstrap/js/bootstrap.min.js"></script>
  <script src="./form-1/assets/js/jquery.backstretch.min.js"></script>
  <script src="./form-1/assets/js/scripts.js"></script>
  <script>
    function imgPreview(fileDom) {
      //åˆ¤æ–­æ˜¯å¦æ”¯æŒFileReader
      if (window.FileReader) {
        var reader = new FileReader();
      } else {
        alert("æ‚¨çš„è®¾å¤‡ä¸æ”¯æŒå›¾ç‰‡é¢„è§ˆåŠŸèƒ½ï¼Œå¦‚éœ€è¯¥åŠŸèƒ½è¯·å‡çº§æ‚¨çš„è®¾å¤‡ï¼");
      }

      //è·å–æ–‡ä»¶
      var file = fileDom.files[0];
      var imageType = /^image\//;
      //æ˜¯å¦æ˜¯å›¾ç‰‡
      if (!imageType.test(file.type)) {
        alert("è¯·é€‰æ‹©å›¾ç‰‡ï¼");
        return;
      }
      //è¯»å–å®Œæˆ
      reader.onload = function (e) {
        //è·å–å›¾ç‰‡dom
        var img = document.getElementById("preview");
        //å›¾ç‰‡è·¯å¾„è®¾ç½®ä¸ºè¯»å–çš„å›¾ç‰‡
        img.src = e.target.result;
      };
      reader.readAsDataURL(file);
    }
  </script>
</body>

</html>